<form [formGroup]="taskForm" (ngSubmit)="onSubmit()" class="space-y-4">
  <div>
    <label for="title" class="block text-sm font-medium text-gray-700">Title*</label>
    <input type="text" id="title" formControlName="title" 
           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
    <div *ngIf="title?.invalid && (title?.dirty || title?.touched)" class="text-red-500 text-xs mt-1">
      <div *ngIf="title?.errors?.['required']">Title is required</div>
      <div *ngIf="title?.errors?.['maxlength']">Title must be less than 100 characters</div>
    </div>
  </div>

  <div>
    <label for="description" class="block text-sm font-medium text-gray-700">Description</label>
    <textarea id="description" formControlName="description" rows="3"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"></textarea>
    <div *ngIf="description?.invalid && (description?.dirty || description?.touched)" class="text-red-500 text-xs mt-1">
      <div *ngIf="description?.errors?.['maxlength']">Description must be less than 500 characters</div>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label for="priority" class="block text-sm font-medium text-gray-700">Priority*</label>
      <select id="priority" formControlName="priority"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
        <option *ngFor="let priority of priorities" [value]="priority">{{ priority }}</option>
      </select>
    </div>

    <div>
      <label for="status" class="block text-sm font-medium text-gray-700">Status*</label>
      <select id="status" formControlName="status"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
        <option *ngFor="let status of statuses" [value]="status">{{ status }}</option>
      </select>
    </div>
  </div>

  <div>
    <label for="dueDate" class="block text-sm font-medium text-gray-700">Due Date*</label>
    <input type="date" id="dueDate" formControlName="dueDate" [min]="today | date:'yyyy-MM-dd'"
           class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
    <div *ngIf="dueDate?.invalid && (dueDate?.dirty || dueDate?.touched)" class="text-red-500 text-xs mt-1">
      <div *ngIf="dueDate?.errors?.['required']">Due date is required</div>
      <div *ngIf="dueDate?.errors?.['min']">Due date must be in the future</div>
    </div>
  </div>

  <div class="flex justify-end space-x-3">
    <button type="button" (click)="onCancel()"
            class="inline-flex justify-center rounded-md border border-gray-300 bg-white py-2 px-4 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
      Cancel
    </button>
    <button type="submit" [disabled]="taskForm.invalid"
            class="inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed">
      {{ task ? 'Update Task' : 'Save Task' }}
    </button>
  </div>
</form>